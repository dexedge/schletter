---
title: "Burgtheater & KÃ¤rntnertortheater, 1781"
author: "David Black and Dexter Edge"
date: "`r format(Sys.time(), '%d %b %Y')`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(DT)
library(lubridate)

calendar <- read.csv("Schletter.csv", header=FALSE, na.strings = c("", "NA"))

colnames(calendar) <- c("YMD", "Theater", "Company", "Title", "Type", "Author", "Composer")

# Change Filemaker date string to YYYY-MM-DD
calendar$YMD <- mdy(calendar$YMD)

# Add display date
calendar <- calendar %>% 
  mutate(Date = format(YMD, "%a, %d %b"), .before = 1)

# Drop rows with blank dates
calendar <- drop_na(calendar, YMD)

# Make Theater and Type factors so DT will use dropdowns
# in filters
calendar$Theater <- as_factor(calendar$Theater)
calendar$Company <- as_factor(calendar$Company)
calendar$Type <- as_factor(calendar$Type)

```

```{r}
DT::datatable(calendar, 
              # style = "bootstrap",
              rownames = FALSE,
              filter = 'top',
              style = 'bootstrap4',
              class = 'compact table-striped',
              options = list(
                autoWidth = TRUE,
                pageLength = 25,
                columnDefs = list(
                                  list(width = '100px',
                                       targets  = 0, 
                                       orderData = 1),
                                  list(targets = 1,
                                       visible = FALSE),
                                  list(width = '80px',
                                       target = 2),
                                  list(width = '90px',
                                       target = 3),
                                  list(width = '320px',
                                       targets = 4),
                                  list(width = '100px',
                                       targets = c(5, 6, 7))))
              ) %>% 
              # Make titles italic except "No title"
              formatStyle("Title", 
                          fontStyle = styleEqual('No title',
                                        'normal',
                                         default = 'italic')
              ) %>%
              # Concerts have NA for their work Type
              # Make their titles normal type
              formatStyle("Title", "Type",
                          fontStyle = styleEqual(NA,
                                         'normal'))
  
```